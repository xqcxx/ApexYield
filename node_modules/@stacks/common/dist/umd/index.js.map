{"version":3,"file":"index.js","mappings":"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","sources":["webpack://StacksCommon/webpack/universalModuleDefinition","webpack://StacksCommon/./src/errors.ts","webpack://StacksCommon/./src/signatures.ts","webpack://StacksCommon/./src/keys.ts","webpack://StacksCommon/./src/buffer.ts","webpack://StacksCommon/./src/logger.ts","webpack://StacksCommon/./src/utils.ts","webpack://StacksCommon/./src/config.ts","webpack://StacksCommon/./src/fetch.ts","webpack://StacksCommon/./src/constants.ts","webpack://StacksCommon/webpack/bootstrap","webpack://StacksCommon/webpack/runtime/compat get default export","webpack://StacksCommon/webpack/runtime/define property getters","webpack://StacksCommon/webpack/runtime/global","webpack://StacksCommon/webpack/runtime/hasOwnProperty shorthand","webpack://StacksCommon/webpack/runtime/make namespace object"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StacksCommon\"] = factory();\n\telse\n\t\troot[\"StacksCommon\"] = factory();\n})(this, () => {\nreturn ","/**\n * @ignore\n */\nexport const ERROR_CODES = {\n  MISSING_PARAMETER: 'missing_parameter',\n  REMOTE_SERVICE_ERROR: 'remote_service_error',\n  INVALID_STATE: 'invalid_state',\n  NO_SESSION_DATA: 'no_session_data',\n  DOES_NOT_EXIST: 'does_not_exist',\n  FAILED_DECRYPTION_ERROR: 'failed_decryption_error',\n  INVALID_DID_ERROR: 'invalid_did_error',\n  NOT_ENOUGH_FUNDS_ERROR: 'not_enough_error',\n  INVALID_AMOUNT_ERROR: 'invalid_amount_error',\n  LOGIN_FAILED_ERROR: 'login_failed',\n  SIGNATURE_VERIFICATION_ERROR: 'signature_verification_failure',\n  CONFLICT_ERROR: 'conflict_error',\n  NOT_ENOUGH_PROOF_ERROR: 'not_enough_proof_error',\n  BAD_PATH_ERROR: 'bad_path_error',\n  VALIDATION_ERROR: 'validation_error',\n  PAYLOAD_TOO_LARGE_ERROR: 'payload_too_large_error',\n  PRECONDITION_FAILED_ERROR: 'precondition_failed_error',\n  UNKNOWN: 'unknown',\n};\n\nObject.freeze(ERROR_CODES);\n\n/**\n * @ignore\n */\ntype ErrorData = {\n  code: string;\n  parameter?: string;\n  message: string;\n};\n\n/**\n * @ignore\n */\nexport class BlockstackError extends Error {\n  message: string;\n\n  code: string;\n\n  parameter?: string;\n\n  constructor(error: ErrorData) {\n    super();\n    let message = error.message;\n    let bugDetails = `Error Code: ${error.code}`;\n    let stack = this.stack;\n    if (!stack) {\n      try {\n        throw new Error();\n      } catch (e: any) {\n        stack = e.stack;\n      }\n    } else {\n      bugDetails += `Stack Trace:\\n${stack}`;\n    }\n    message += `\\nIf you believe this exception is caused by a bug in stacks.js,\n      please file a bug report: https://github.com/blockstack/stacks.js/issues\\n\\n${bugDetails}`;\n    this.message = message;\n    this.code = error.code;\n    this.parameter = error.parameter ? error.parameter : undefined;\n  }\n\n  toString() {\n    return `${super.toString()}\n    code: ${this.code} param: ${this.parameter ? this.parameter : 'n/a'}`;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class MissingParameterError extends BlockstackError {\n  constructor(parameter: string, message: string = '') {\n    super({ code: ERROR_CODES.MISSING_PARAMETER, message, parameter });\n    this.name = 'MissingParametersError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class RemoteServiceError extends BlockstackError {\n  response: Response;\n\n  constructor(response: Response, message: string = '') {\n    super({ code: ERROR_CODES.REMOTE_SERVICE_ERROR, message });\n    this.response = response;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidDIDError extends BlockstackError {\n  constructor(message: string = '') {\n    super({ code: ERROR_CODES.INVALID_DID_ERROR, message });\n    this.name = 'InvalidDIDError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughFundsError extends BlockstackError {\n  leftToFund: number;\n\n  constructor(leftToFund: number) {\n    const message = `Not enough UTXOs to fund. Left to fund: ${leftToFund}`;\n    super({ code: ERROR_CODES.NOT_ENOUGH_FUNDS_ERROR, message });\n    this.leftToFund = leftToFund;\n    this.name = 'NotEnoughFundsError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidAmountError extends BlockstackError {\n  fees: number;\n\n  specifiedAmount: number;\n\n  constructor(fees: number, specifiedAmount: number) {\n    const message =\n      `Not enough coin to fund fees transaction fees. Fees would be ${fees},` +\n      ` specified spend is  ${specifiedAmount}`;\n    super({ code: ERROR_CODES.INVALID_AMOUNT_ERROR, message });\n    this.specifiedAmount = specifiedAmount;\n    this.fees = fees;\n    this.name = 'InvalidAmountError';\n    this.message = message;\n  }\n}\n\n/**\n * @ignore\n */\nexport class LoginFailedError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to login: ${reason}`;\n    super({ code: ERROR_CODES.LOGIN_FAILED_ERROR, message });\n    this.message = message;\n    this.name = 'LoginFailedError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class SignatureVerificationError extends BlockstackError {\n  constructor(reason: string) {\n    const message = `Failed to verify signature: ${reason}`;\n    super({ code: ERROR_CODES.SIGNATURE_VERIFICATION_ERROR, message });\n    this.message = message;\n    this.name = 'SignatureVerificationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class FailedDecryptionError extends BlockstackError {\n  constructor(message: string = 'Unable to decrypt cipher object.') {\n    super({ code: ERROR_CODES.FAILED_DECRYPTION_ERROR, message });\n    this.message = message;\n    this.name = 'FailedDecryptionError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class InvalidStateError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'InvalidStateError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NoSessionDataError extends BlockstackError {\n  constructor(message: string) {\n    super({ code: ERROR_CODES.INVALID_STATE, message });\n    this.message = message;\n    this.name = 'NoSessionDataError';\n  }\n}\n\n/**\n * @ignore\n */\nexport interface GaiaHubErrorResponse {\n  status: number;\n  statusText: string;\n  body?: any; // todo: should this be string?\n}\n\nexport interface HubErrorDetails {\n  message?: string;\n  statusCode: number;\n  statusText: string;\n  [prop: string]: any;\n}\n\n/**\n * @ignore\n */\nexport class GaiaHubError extends BlockstackError {\n  hubError?: HubErrorDetails;\n\n  constructor(error: ErrorData, response: GaiaHubErrorResponse) {\n    super(error);\n    if (response) {\n      this.hubError = {\n        statusCode: response.status,\n        statusText: response.statusText,\n      };\n      if (typeof response.body === 'string') {\n        this.hubError.message = response.body;\n      } else if (typeof response.body === 'object') {\n        Object.assign(this.hubError, response.body);\n      }\n    }\n  }\n}\n\n/**\n * @ignore\n */\nexport class DoesNotExist extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.DOES_NOT_EXIST }, response);\n    this.name = 'DoesNotExist';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ConflictError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.CONFLICT_ERROR }, response);\n    this.name = 'ConflictError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class NotEnoughProofError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.NOT_ENOUGH_PROOF_ERROR }, response);\n    this.name = 'NotEnoughProofError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class BadPathError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.BAD_PATH_ERROR }, response);\n    this.name = 'BadPathError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class ValidationError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.VALIDATION_ERROR }, response);\n    this.name = 'ValidationError';\n  }\n}\n\n/**\n * @ignore\n */\nexport class PayloadTooLargeError extends GaiaHubError {\n  /** Can be `null` when an oversized payload is detected client-side. */\n  hubError?: HubErrorDetails;\n\n  maxUploadByteSize: number;\n\n  constructor(message: string, response: GaiaHubErrorResponse | null, maxUploadByteSize: number) {\n    super({ message, code: ERROR_CODES.PAYLOAD_TOO_LARGE_ERROR }, response!);\n    this.name = 'PayloadTooLargeError';\n    this.maxUploadByteSize = maxUploadByteSize;\n  }\n}\n\n/**\n * @ignore\n */\nexport class PreconditionFailedError extends GaiaHubError {\n  constructor(message: string, response: GaiaHubErrorResponse) {\n    super({ message, code: ERROR_CODES.PRECONDITION_FAILED_ERROR }, response);\n    this.name = 'PreconditionFailedError';\n  }\n}\n","import { hexToInt } from './utils';\n\nconst COORDINATE_BYTES = 32;\n\n/** @ignore */\nexport function parseRecoverableSignatureVrs(signature: string) {\n  // todo: prefer RSV format or add format options of message signing functions\n  if (signature.length < COORDINATE_BYTES * 2 * 2 + 1) {\n    throw new Error('Invalid signature');\n  }\n  const recoveryIdHex = signature.slice(0, 2);\n  const r = signature.slice(2, 2 + COORDINATE_BYTES * 2);\n  const s = signature.slice(2 + COORDINATE_BYTES * 2);\n  return {\n    recoveryId: hexToInt(recoveryIdHex),\n    r,\n    s,\n  };\n}\n\n/** @ignore */\nexport function signatureVrsToRsv(signature: string) {\n  return signature.slice(2) + signature.slice(0, 2);\n}\n\n/** @ignore */\nexport function signatureRsvToVrs(signature: string) {\n  return signature.slice(-2) + signature.slice(0, -2);\n}\n","import { hexToBytes } from './utils';\n\nexport type PrivateKey = string | Uint8Array;\nexport type PublicKey = string | Uint8Array;\n\n/**\n * @private\n * @ignore\n */\nexport function privateKeyToBytes(privateKey: PrivateKey): Uint8Array {\n  const privateKeyBuffer = typeof privateKey === 'string' ? hexToBytes(privateKey) : privateKey;\n\n  if (privateKeyBuffer.length != 32 && privateKeyBuffer.length != 33) {\n    throw new Error(\n      `Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${privateKeyBuffer.length}`\n    );\n  }\n\n  if (privateKeyBuffer.length == 33 && privateKeyBuffer[32] !== 1) {\n    throw new Error(\n      'Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01'\n    );\n  }\n\n  return privateKeyBuffer;\n}\n","/** @ignore */\nexport function equals(a: Uint8Array, b: Uint8Array) {\n  if (a.byteLength !== b.byteLength) return false;\n  for (let i = 0; i < a.byteLength; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\n/**\n * @ignore\n * TODO: maybe remove and use string repeat\n */\nexport function alloc(length: number, value: number) {\n  const a = new Uint8Array(length);\n  for (let i = 0; i < length; i++) {\n    a[i] = value;\n  }\n  return a;\n}\n\n/** @ignore */\nexport function readUInt16BE(source: Uint8Array, offset: number): number {\n  return ((source[offset + 0] << 8) | source[offset + 1]) >>> 0;\n}\n\n/** @ignore */\nexport function writeUInt16BE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 0] = value >>> 8;\n  destination[offset + 1] = value >>> 0;\n  return destination;\n}\n\n// The following methods are based on `microsoft/vscode` implementation\n// https://github.com/microsoft/vscode/blob/1e6ac12df197fc3e5d1c1bdb25702125cccb135a/src/vs/base/common/buffer.ts\n\n// Copyright (c) 2015 - present Microsoft Corporation\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n/** @ignore */\nexport function readUInt8(source: Uint8Array, offset: number): number {\n  return source[offset];\n}\n\n/** @ignore */\nexport function writeUInt8(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset] = value;\n  return destination;\n}\n\n/** @ignore */\nexport function readUInt16LE(source: Uint8Array, offset: number): number {\n  return ((source[offset + 0] << 0) >>> 0) | ((source[offset + 1] << 8) >>> 0);\n}\n\n/** @ignore */\nexport function writeUInt16LE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 0] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 1] = value & 0b1111_1111;\n  return destination;\n}\n\n/** @ignore */\nexport function readUInt32BE(source: Uint8Array, offset: number): number {\n  return (\n    source[offset] * 2 ** 24 +\n    source[offset + 1] * 2 ** 16 +\n    source[offset + 2] * 2 ** 8 +\n    source[offset + 3]\n  );\n}\n\n/** @ignore */\nexport function writeUInt32BE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 3] = value;\n  value >>>= 8;\n  destination[offset + 2] = value;\n  value >>>= 8;\n  destination[offset + 1] = value;\n  value >>>= 8;\n  destination[offset] = value;\n  return destination;\n}\n\n/** @ignore */\nexport function readUInt32LE(source: Uint8Array, offset: number): number {\n  return (\n    ((source[offset + 0] << 0) >>> 0) |\n    ((source[offset + 1] << 8) >>> 0) |\n    ((source[offset + 2] << 16) >>> 0) |\n    ((source[offset + 3] << 24) >>> 0)\n  );\n}\n\n/** @ignore */\nexport function writeUInt32LE(destination: Uint8Array, value: number, offset = 0): Uint8Array {\n  destination[offset + 0] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 1] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 2] = value & 0b1111_1111;\n  value >>>= 8;\n  destination[offset + 3] = value & 0b1111_1111;\n  return destination;\n}\n","import { config } from './config';\n\nconst levels = ['debug', 'info', 'warn', 'error', 'none'];\n\nconst levelToInt: { [level: string]: number } = {};\nconst intToLevel: { [int: number]: string } = {};\n\nfor (let index = 0; index < levels.length; index++) {\n  const level = levels[index];\n  levelToInt[level] = index;\n  intToLevel[index] = level;\n}\n\n/**\n * @ignore\n * @deprecated\n */\nexport class Logger {\n  static error(message: string) {\n    if (!this.shouldLog('error')) return;\n    console.error(this.logMessage('error', message));\n  }\n\n  static warn(message: string) {\n    if (!this.shouldLog('warn')) return;\n    console.warn(this.logMessage('warn', message));\n  }\n\n  static info(message: string) {\n    if (!this.shouldLog('info')) return;\n    console.log(this.logMessage('info', message));\n  }\n\n  static debug(message: string) {\n    if (!this.shouldLog('debug')) return;\n    console.log(this.logMessage('debug', message));\n  }\n\n  static logMessage(level: string, message: string) {\n    return `[${level.toUpperCase()}] ${message}`;\n  }\n\n  static shouldLog(level: string) {\n    const currentLevel = levelToInt[config.logLevel];\n    return currentLevel <= levelToInt[level];\n  }\n}\n","import { Logger } from './logger';\n\n/**\n *  @ignore\n * @deprecated\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n// todo: `next` get rid of all this blockstack stuff\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n * @deprecated\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n * @deprecated\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n * @deprecated\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n * @deprecated\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n * @deprecated\n */\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n * @deprecated\n */\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n * @deprecated\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n * @deprecated\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\n/** @deprecated */\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n\n/** Different Integer representations */\nexport type IntegerType = number | string | bigint | Uint8Array;\n\n/**\n * Converts an integer-compatible value to a Uint8Array (given a byte length)\n * @example\n * ```ts\n * import { intToBytes } from \"@stacks/common\";\n * console.log(intToBytes(560, 4));\n * // Uint8Array(4) [ 0, 0, 2, 48 ]\n * ```\n */\nexport function intToBytes(value: IntegerType, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value), byteLength);\n}\n\n/**\n * Converts an integer-compatible value to a bigint\n * @param value - The value to convert to a bigint\n * @returns The bigint representation of the value\n *\n * @example\n * ```ts\n * intToBigInt(123); // 123n\n * intToBigInt('0xbeef'); // 48879n\n * ```\n */\nexport function intToBigInt(value: IntegerType): bigint {\n  if (typeof value === 'bigint') return value;\n  if (typeof value === 'string') return BigInt(value);\n  if (typeof value === 'number') {\n    if (!Number.isInteger(value)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(value);\n  }\n\n  if (isInstance(value, Uint8Array)) return BigInt(`0x${bytesToHex(value)}`);\n\n  throw new TypeError(\n    `intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.`\n  );\n}\n\n/**\n * Adds a `0x` prefix to a string if it does not already have one.\n */\nexport function with0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value\n    : `0x${value}`;\n}\n\n/**\n * Removes the `0x` prefix of a string if it has one.\n */\nexport function without0x(value: string): string {\n  return /^0x/i.test(value) // startsWith('0x') case insensitive\n    ? value.slice(2)\n    : value;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n */\nexport function intToHex(integer: IntegerType, byteLength = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer);\n  return value.toString(16).padStart(byteLength * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/** @ignore */\nexport function bytesToTwosBigInt(bytes: Uint8Array): bigint {\n  return fromTwos(BigInt(`0x${bytesToHex(bytes)}`), BigInt(bytes.byteLength * 8));\n}\n\n/**\n * Converts from two's complement to signed number\n * @internal\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * hexToBytes('0xdeadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n\n  hex = without0x(hex);\n  hex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n\n  const array = new Uint8Array(hex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = hex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance<T>(object: any, clazz: { new (...args: any[]): T }): object is T {\n  return object instanceof clazz || object?.constructor?.name?.toLowerCase() === clazz.name;\n}\n\n/**\n * Checks whether a string is a valid hex string, and has a length of 64 characters.\n */\nexport function validateHash256(hex: string): boolean {\n  hex = without0x(hex);\n  if (hex.length !== 64) return false;\n  return /^[0-9a-fA-F]+$/.test(hex);\n}\n","/**\n * @ignore\n * todo: remove this file (needed for CLI?)\n */\nconst config = {\n  network: {\n    layer1: 'placeholder',\n  },\n  logLevel: 'debug',\n};\n\nexport { config };\n","// Define default request options and allow modification using getters, setters\n// Reference: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\nconst defaultFetchOpts: RequestInit = {\n  // By default referrer value will be client:origin: above reference link\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\n  referrerPolicy: 'origin', // Use origin value for referrer policy\n  headers: {\n    'x-hiro-product': 'stacksjs',\n  },\n};\n\n/**\n * Get fetch options\n * @category Network\n */\nexport const getFetchOptions = () => {\n  return defaultFetchOpts;\n};\n\n/**\n * Sets global fetch options for stacks.js network calls.\n *\n * @example\n * Users can change the default referrer as well as other options when fetch is used internally by stacks.js:\n * ```\n * setFetchOptions({ referrer: 'no-referrer', referrerPolicy: 'no-referrer', ...otherRequestOptions });\n * ```\n * After calling {@link setFetchOptions} all subsequent network calls will use the specified options above.\n *\n * @see MDN Request: https://developer.mozilla.org/en-US/docs/Web/API/Request/Request\n * @returns global fetch options after merging with previous options (or defaults)\n * @category Network\n * @related {@link getFetchOptions}\n */\nexport const setFetchOptions = (ops: RequestInit): RequestInit => {\n  return Object.assign(defaultFetchOpts, ops);\n};\n\n/** @ignore */\nexport async function fetchWrapper(input: RequestInfo, init?: RequestInit): Promise<Response> {\n  const fetchOpts = {};\n  // Use the provided options in request options along with default or user provided values\n  Object.assign(fetchOpts, defaultFetchOpts, init);\n\n  const fetchResult = await fetch(input, fetchOpts);\n  return fetchResult;\n}\n\nexport type FetchFn = (url: string, init?: RequestInit) => Promise<Response>;\n\n/**\n * @ignore Internally used for letting networking functions specify \"API\" options.\n * Should be compatible with the `client`s created by the API and RPC packages.\n */\nexport interface ClientOpts {\n  baseUrl?: string;\n  fetch?: FetchFn;\n}\n\n/** @ignore Internally used for letting networking functions specify \"API\" options */\nexport interface ClientParam {\n  /** Optional API object (for `.baseUrl` and `.fetch`) used for API/Node, defaults to use mainnet */\n  client?: ClientOpts;\n}\n\nexport interface RequestContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n}\n\nexport interface ResponseContext {\n  fetch: FetchFn;\n  url: string;\n  init: RequestInit;\n  response: Response;\n}\n\nexport interface FetchParams {\n  url: string;\n  init: RequestInit;\n}\n\nexport interface FetchMiddleware {\n  pre?: (context: RequestContext) => PromiseLike<FetchParams | void> | FetchParams | void;\n  post?: (context: ResponseContext) => Promise<Response | void> | Response | void;\n}\nexport interface ApiKeyMiddlewareOpts {\n  /** The middleware / API key header will only be added to requests matching this host. */\n  host?: RegExp | string;\n  /** The http header name used for specifying the API key value. */\n  httpHeader?: string;\n  /** The API key string to specify as an http header value. */\n  apiKey: string;\n}\n\n/** @ignore */\nexport function hostMatches(host: string, pattern: string | RegExp) {\n  if (typeof pattern === 'string') return pattern === host;\n  return pattern.exec(host);\n}\n\n/**\n * Creates a new middleware from an API key.\n * @example\n * ```\n * const apiMiddleware = createApiKeyMiddleware(\"example_e8e044a3_41d8b0fe_3dd3988ef302\");\n * const fetchFn = createFetchFn(apiMiddleware);\n * const network = new StacksMainnet({ fetchFn });\n * ```\n * @category Network\n * @related {@link createFetchFn}, {@link StacksNetwork}\n */\nexport function createApiKeyMiddleware({\n  apiKey,\n  host = /(.*)api(.*)(\\.stacks\\.co|\\.hiro\\.so)$/i,\n  httpHeader = 'x-api-key',\n}: ApiKeyMiddlewareOpts): FetchMiddleware {\n  return {\n    pre: context => {\n      const reqUrl = new URL(context.url);\n      if (!hostMatches(reqUrl.host, host)) return; // Skip middleware if host does not match pattern\n\n      const headers =\n        context.init.headers instanceof Headers\n          ? context.init.headers\n          : (context.init.headers = new Headers(context.init.headers));\n      headers.set(httpHeader, apiKey);\n    },\n  };\n}\n\nfunction argsForCreateFetchFn(args: any[]): { fetchLib: FetchFn; middlewares: FetchMiddleware[] } {\n  let fetchLib: FetchFn = fetchWrapper;\n  let middlewares: FetchMiddleware[] = [];\n  if (args.length > 0 && typeof args[0] === 'function') {\n    fetchLib = args.shift();\n  }\n  if (args.length > 0) {\n    middlewares = args; // remaining args\n  }\n  return { fetchLib, middlewares };\n}\n\n/**\n * Creates a new network fetching function, which combines an optional fetch-compatible library with optional middleware.\n * @example\n * ```\n * const customFetch = createFetchFn(someMiddleware)\n * const customFetch = createFetchFn(fetch, someMiddleware)\n * const customFetch = createFetchFn(fetch, middlewareA, middlewareB)\n * ```\n * @category Network\n */\nexport function createFetchFn(fetchLib: FetchFn, ...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...middleware: FetchMiddleware[]): FetchFn;\nexport function createFetchFn(...args: any[]): FetchFn {\n  const { fetchLib, middlewares } = argsForCreateFetchFn(args);\n\n  const fetchFn = async (url: string, init?: RequestInit | undefined): Promise<Response> => {\n    let fetchParams = { url, init: init ?? {} };\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.pre === 'function') {\n        const result = await Promise.resolve(\n          middleware.pre({\n            fetch: fetchLib,\n            ...fetchParams,\n          })\n        );\n        fetchParams = result ?? fetchParams;\n      }\n    }\n\n    let response = await fetchLib(fetchParams.url, fetchParams.init);\n\n    for (const middleware of middlewares) {\n      if (typeof middleware.post === 'function') {\n        const result = await Promise.resolve(\n          middleware.post({\n            fetch: fetchLib,\n            url: fetchParams.url,\n            init: fetchParams.init,\n            response: response?.clone() ?? response,\n          })\n        );\n        response = result ?? response;\n      }\n    }\n    return response;\n  };\n  return fetchFn;\n}\n\n// /** @ignore Creates a client-like object, which can be used without circular dependencies */\n// export function defaultClientOpts(opts?: { baseUrl?: string; fetch?: FetchFn }) {\n//   return {\n//     baseUrl: opts?.baseUrl ?? HIRO_MAINNET_URL,\n//     fetch: opts?.fetch ?? createFetchFn(),\n//   };\n// }\n","export const HIRO_MAINNET_URL = 'https://api.mainnet.hiro.so';\nexport const HIRO_TESTNET_URL = 'https://api.testnet.hiro.so';\nexport const DEVNET_URL = 'http://localhost:3999';\n\nexport const GAIA_URL = 'https://hub.blockstack.org';\n\n// todo: deduplicate magic variables\n\n/** @ignore internal */\nexport const PRIVATE_KEY_BYTES_COMPRESSED = 33;\n\n/** @ignore internal */\nexport const PRIVATE_KEY_BYTES_UNCOMPRESSED = 32;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["root","factory","exports","module","define","amd","this","ERROR_CODES","MISSING_PARAMETER","REMOTE_SERVICE_ERROR","INVALID_STATE","NO_SESSION_DATA","DOES_NOT_EXIST","FAILED_DECRYPTION_ERROR","INVALID_DID_ERROR","NOT_ENOUGH_FUNDS_ERROR","INVALID_AMOUNT_ERROR","LOGIN_FAILED_ERROR","SIGNATURE_VERIFICATION_ERROR","CONFLICT_ERROR","NOT_ENOUGH_PROOF_ERROR","BAD_PATH_ERROR","VALIDATION_ERROR","PAYLOAD_TOO_LARGE_ERROR","PRECONDITION_FAILED_ERROR","UNKNOWN","Object","freeze","BlockstackError","Error","constructor","error","super","message","bugDetails","code","stack","e","parameter","toString","InvalidParameterError","name","MissingParameterError","RemoteServiceError","response","InvalidDIDError","NotEnoughFundsError","leftToFund","InvalidAmountError","fees","specifiedAmount","LoginFailedError","reason","SignatureVerificationError","FailedDecryptionError","InvalidStateError","NoSessionDataError","GaiaHubError","hubError","statusCode","status","statusText","body","assign","DoesNotExist","ConflictError","NotEnoughProofError","BadPathError","ValidationError","PayloadTooLargeError","maxUploadByteSize","PreconditionFailedError","COORDINATE_BYTES","parseRecoverableSignatureVrs","signature","length","recoveryIdHex","slice","r","s","recoveryId","signatureVrsToRsv","signatureRsvToVrs","privateKeyToBytes","privateKey","privateKeyBuffer","equals","a","b","byteLength","i","alloc","value","Uint8Array","readUInt16BE","source","offset","writeUInt16BE","destination","readUInt8","writeUInt8","readUInt16LE","writeUInt16LE","readUInt32BE","writeUInt32BE","readUInt32LE","writeUInt32LE","levels","levelToInt","intToLevel","index","level","Logger","shouldLog","console","logMessage","warn","info","log","debug","toUpperCase","logLevel","BLOCKSTACK_HANDLER","nextYear","Date","setFullYear","getFullYear","nextMonth","setMonth","getMonth","nextHour","setHours","getHours","megabytesToBytes","megabytes","Number","isFinite","Math","floor","getAesCbcOutputLength","inputByteLength","getBase64OutputLength","ceil","updateQueryStringParameter","uri","key","re","RegExp","separator","indexOf","match","replace","isLaterVersion","v1","v2","v1tuple","split","map","x","parseInt","v2tuple","push","makeUUID4","d","getTime","performance","now","c","random","isSameOriginAbsoluteUrl","uri1","uri2","parsedUri1","URL","parsedUri2","port1","port","protocol","port2","scheme","hostname","absolute","includes","getGlobalScope","self","window","g","getAPIUsageErrorMessage","scopeObject","apiName","usageDesc","getGlobalObject","throwIfUnavailable","returnEmptyObject","globalScope","obj","errMsg","getGlobalObjects","names","result","intToBytes","bigIntToBytes","intToBigInt","BigInt","isInteger","RangeError","MAX_SAFE_INTEGER","isInstance","bytesToHex","TypeError","with0x","test","without0x","hexToBigInt","hex","intToHex","integer","padStart","hexToInt","hexToBytes","toTwos","width","bytesToTwosBigInt","bytes","fromTwos","n","nthBit","hexes","Array","from","_","uint8a","u","array","j","hexByte","byte","isNaN","utf8ToBytes","str","TextEncoder","encode","bytesToUtf8","arr","TextDecoder","decode","asciiToBytes","byteArray","charCodeAt","bytesToAscii","String","fromCharCode","apply","isNotOctet","octet","octetsToBytes","numbers","some","concatBytes","arrays","every","reduce","pad","set","concatArray","elements","object","clazz","toLowerCase","validateHash256","config","network","layer1","defaultFetchOpts","referrerPolicy","headers","getFetchOptions","setFetchOptions","ops","async","fetchWrapper","input","init","fetchOpts","fetch","hostMatches","host","pattern","exec","createApiKeyMiddleware","apiKey","httpHeader","pre","context","url","Headers","createFetchFn","args","fetchLib","middlewares","shift","argsForCreateFetchFn","fetchParams","middleware","Promise","resolve","post","clone","HIRO_MAINNET_URL","HIRO_TESTNET_URL","DEVNET_URL","GAIA_URL","PRIVATE_KEY_BYTES_COMPRESSED","PRIVATE_KEY_BYTES_UNCOMPRESSED","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","o","defineProperty","enumerable","get","globalThis","Function","prop","prototype","hasOwnProperty","call","Symbol","toStringTag"],"sourceRoot":""}